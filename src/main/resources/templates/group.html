<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

    <link rel="stylesheet" href="http://getbootstrap.com/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="http://getbootstrap.com/dist/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="http://getbootstrap.com/examples/dashboard/dashboard.css"/>

</head>
<body>
<div class="navbar navbar-default">
    <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
            <li><a href="/">Leaderboard</a></li>
            <th:block th:each="group : ${groups}">
                <li>
                    <a href="index" th:href="@{'/group/' + ${group.getGroupId()}}" th:text="${'Group'+ group.groupName}">grp</a>
                </li>
            </th:block>
            <li><a href="/playoff">Playoff</a></li>
            <li><a href="user"
                   th:href="@{'/user/'+ ${activeUser.displayName}}"
                   th:text="${activeUser.displayName}"
                   th:if="${activeUser.isValid()}"></a>
            </li>
            <li><a href="/user"
                   th:if="${not activeUser.isValid()}">Register</a>
            </li>
            <li><a href="/logout" th:if="${activeUser.isValid()}">Logout</a></li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</div>

<table width="75%">
    <tr>
        <td width="30%">
            <table valign="top" width="100%" class="table table-striped">
                <thead>
                <tr>
                    <th align="center">Pos.</th>
                    <th align="center">Team</th>
                    <th align="center">Scored</th>
                    <th align="center"></th>
                    <th align="center">Against</th>
                    <th align="center">+/-</th>
                    <th align="center">Points</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="tableEntry, iterStat : ${currentStandings}">
                    <td width="15%"><label id="position" th:text="${iterStat.count}">label</label></td>
                    <td width="40%" id="team" th:text="${tableEntry.team}">team</td>
                    <td width="10%" th:text="${tableEntry.goalsFor}">for</td>
                    <td width="5%"> -</td>
                    <td width="10%" th:text="${tableEntry.goalsAgainst}">against</td>
                    <td width="10%" th:text="${tableEntry.goalDifference()}">diff</td>
                    <td width="10%" th:text="${tableEntry.points + 'p'}">points</td>
                </tr>
                </tbody>
            </table>
        </td>
        <td width="15%">
            &nbsp;
        </td>
        <td width="30%">
            <form id="predicionForm" action="" th:action="@{'/prediction/'+${group}}" method="post">
                <table width="100%" th:if="${canEdit}" class="table table-striped">
                    <thead>
                    <tr>
                        <th></th>
                        <th> Group prediction</th>
                    </tr>
                    </thead>
                    <tr>
                        <td width="5%">1</td>

                        <td width="95%">
                            <input type="text" id="prediction1" name="prediction1" th:value="${prediction.tablePrediction.get(0)}"/>
                        </td>
                    </tr>
                    <tr>
                        <td width="5%"> 2</td>
                        <td width="95%">
                            <input type="text" id="prediction2" name="prediction2" th:value="${prediction.tablePrediction.get(1)}"/>
                        </td>
                    </tr>
                    <tr>
                        <td width="5%">3</td>
                        <td width="95%">
                            <input type="text" id="prediction3" name="prediction3" th:value="${prediction.tablePrediction.get(2)}"/>
                        </td>
                    </tr>
                    <tr>
                        <td width="5%">4</td>
                        <td width="95%">
                            <input type="text" id="prediction4" name="prediction4" th:value="${prediction.tablePrediction.get(3)}"/>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" width="5%">

                        </td>
                        <td align="left" width="95%" colspan="2">
                            <button type="submit" th:if="${prediction.editable(activeUser)}" class="btn btn-sm btn-success">Submit</button>
                        </td>
                    </tr>
                </table>
            </form>
        </td>
    </tr>
</table>
<p height="30px">&nbsp;</p>

<form id="matchForm" action="" th:action="@{'/group/'+${group}}" method="post">
    <table width="75%" class="table table-striped">
        <thead>
        <tr>
            <th width="20%">Date</th>
            <th align="center">Home Team</th>
            <th width="1%">&nbsp;</th>
            <th align="center">Away Team</th>
            <th width="8%">&nbsp;</th>
            <th width="1%">&nbsp;</th>
            <th width="8%">&nbsp;</th>
            <th width="2%">Score</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="match,iterStat : ${matches}">
            <td th:text="${#dates.format(match.matchStart,'dd MMMM yyyy HH:mm')}">start</td>
            <td th:text="${match.homeTeam}">home</td>
            <td>-</td>
            <td th:text="${match.awayTeam}">Away</td>
            <th:block th:if="${match.editable(activeUser)}">
                <td align="right">
                    <input type="text" size="2"
                           id="${match.id}_home"
                           th:value="${match.resultFor(activeUser.id).homeGoals}"
                           name=""
                           th:name="${match.id+'_h'}"
                           th:if="${match.editable(activeUser)}"/>
                </td>
                <td><label>-</label></td>
                <td>
                    <input type="text" size="2"
                           id="${match.id}_away"
                           name="away"
                           th:value="${match.resultFor(activeUser.id).awayGoals}"
                           th:name="${match.id+'_a'}"
                           th:if="${match.editable(activeUser)}"/>
                </td>
            </th:block>

            <th:block th:if="not ${match.editable(activeUser)}">
                <td align="right">
                    <label th:text="${match.resultFor(activeUser.id).homeGoals}"
                           th:if="${match.resultFor(activeUser.id).isValid()}">&nbsp;</label>
                </td>
                <td><label>-</label></td>
                <td>
                    <label th:text="${match.resultFor(activeUser.id).awayGoals}"
                           th:if="${match.resultFor(activeUser.id).isValid()}">&nbsp;</label>
                </td>
            </th:block>

            <td th:if="${activeUser.isValid()}">
                <label th:if="${match.hasResult()}"
                       th:text="${match.scoreFor(activeUser.id) + 'p'}"/>
            </td>
        </tr>
        <tr>
            <td colspan="5"></td>
            <td colspan="3" align="left">
                <button class="btn btn-sm btn-success" type="submit" th:if="${prediction.editable(activeUser)}">Submit</button>
            </td>
        </tr>
        </tbody>
    </table>
</form>
</body>
</html>